---
# all host specific code is in /roles/device/tasks/<hostname>.yml

- name: System bootstrap
  hosts: localhost
  connection: local
  tasks:
    - name: Ensure directory ~/.config
      ansible.builtin.file:
        path: '{{ ansible_env.HOME }}/.config'
        state: directory
      tags: always

    # this delegates the whole setup to another file
    - name: Run setup for {{ ansible_nodename }}
      ansible.builtin.include_role:
        name: device
        tasks_from: '{{ ansible_nodename }}'
        vars_from: '{{ ansible_nodename }}'
      tags: always

