#!/usr/bin/sh

# split up to avoid matching itself
at='@'
marker="${at}nogit"

echo "$(tput setaf 4)Checking for $marker marker in staged$(tput sgr0)"

var=$(git grep --color=always --cached --name-only "$marker")
if [[ $? -eq 0 ]]; then
    echo -e "$(tput setaf 1)Error $marker marker found in following files:$(tput sgr0)"
    # indent the file names
    echo "$var" | sed 's/^/   /'
    exit 1
fi

