#!/usr/bin/env bash
#
# task/set - set the current task

DIR="$HOME/.task"

if [[ -z "$1" ]]; then
    rm -f "${DIR:?}/.current.md"
    echo "Current task removed"
    exit
fi

echo "Current task set to '$1'"
mkdir -p "$DIR"

# create the header if the task never existed
if [[ ! -f "$DIR/$1.md" ]]; then
    echo "# TASK $1" > "$DIR/$1.md"
fi

# link to current task
ln -sf "$1.md" "$DIR/.current.md"

