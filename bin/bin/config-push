#!/bin/bash
#
# config-push - safely push the config

ROOT=$(realpath "$(dirname "${BASH_SOURCE[0]}")/../..")

# pick what to add into the commit
git -C "$ROOT" add --patch

# then allow editing the message but provide default
git -C "$ROOT" commit --message="#A $(hostname) ($(date +"%Y-%m-%dT%H:%M:%S%z"))" --edit || exit 0

# push
git -C "$ROOT" push

