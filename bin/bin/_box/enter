#!/usr/bin/env bash
#
# box/enter - wrapper around toolbox enter but with customizable entrypoint

POSITIONAL_ARGS=()

while [ $# -gt 0 ]; do
    case $1 in
        -e|--entrypoint)
            ENTRYPOINT=$2
            shift 2
            ;;
        --*|-*)
            echo "Unknown option $1"
            exit 1
            ;;
        *)
            # save positional arg
            POSITIONAL_ARGS+=("$1")
            shift
            ;;
    esac
done

# restore positional parameters
set -- "${POSITIONAL_ARGS[@]}"

if [[ -n "$1" ]]; then
    arg=(--container "$1")
fi

toolbox run "${arg[@]}" "${ENTRYPOINT:-/usr/bin/zsh}"

